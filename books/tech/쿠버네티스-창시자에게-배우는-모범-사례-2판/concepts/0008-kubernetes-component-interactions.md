# 컴포넌트 상호작용 이해 (Kubernetes Component Interactions)

## 정의

쿠버네티스 리소스들이 개별 기능으로 존재하는 것이 아니라, 서로 의존하고 연결되어 하나의 서비스 동작을 만드는 구조를 이해하는 개념.

## 왜 중요한가?

- 장애 원인은 단일 리소스보다 리소스 간 경계에서 자주 발생한다.
- 성능/가용성 문제를 정확히 찾으려면 요청 흐름 전체를 볼 수 있어야 한다.
- 운영 자동화는 컴포넌트 간 계약(Contract)이 명확해야 안정적으로 동작한다.

## 책 내용 핵심 정리

- 쿠버네티스를 잘 활용하려면 각 요소가 서로 어떻게 맞물리는지 이해해야 한다.
- 큰 시스템도 결국 기본 컴포넌트 조합으로 만들어진다.

## 실무 포인트

### 1. 요청 흐름을 구조로 본다
- `Ingress -> Service -> Pod` 경로를 기본 트래픽 모델로 문서화한다.
- 데이터 경로는 `Pod -> PVC -> StorageClass`까지 함께 본다.

### 2. 설정/보안 흐름을 분리한다
- 설정은 ConfigMap, 민감정보는 Secret으로 분리한다.
- 서비스 계정, RBAC, NetworkPolicy를 함께 설계해 권한 경계를 만든다.

### 3. 관측 지점을 컴포넌트별로 둔다
- 애플리케이션 로그 외에 Ingress, kube-proxy, 스토리지 이벤트를 함께 모니터링한다.
- SLI/SLO를 경로별(진입, 처리, 저장)로 나눠 본다.

## 바로 적용 가능한 체크리스트

- [ ] 서비스별 아키텍처 다이어그램에 K8s 리소스 경계를 표시했다.
- [ ] 트래픽 경로/데이터 경로를 분리해 문서화했다.
- [ ] 리소스 간 의존성 실패 시나리오를 점검했다.
- [ ] 장애 대응 런북에 리소스 순서별 점검 절차가 있다.

## 실무 한 줄

쿠버네티스 운영 실력은 리소스를 아는 것보다, 리소스가 함께 실패하는 방식을 이해하는 데서 나온다.

## 관련 개념

- Ingress / Service / Pod
- ConfigMap / Secret
- PVC / StorageClass
- RBAC / NetworkPolicy

## 출처

- 쿠버네티스 창시자에게 배우는 모범 사례 2판

