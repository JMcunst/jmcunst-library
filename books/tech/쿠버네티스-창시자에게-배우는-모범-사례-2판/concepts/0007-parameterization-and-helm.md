# 구성 파라미터화와 Helm (Parameterization and Helm)

## 정의

애플리케이션 배포 매니페스트에서 환경별로 달라지는 값만 분리해 관리하고, 공통 템플릿을 재사용하는 방식.

## 왜 중요한가?

- 개발/스테이징/운영에 같은 구성을 일관되게 배포할 수 있다.
- 환경마다 매니페스트를 복제하는 방식에서 발생하는 설정 드리프트를 줄인다.
- 변경점을 값 파일 중심으로 관리해 리뷰와 감사가 쉬워진다.

## 책 내용 핵심 정리

- 다양한 환경에서 애플리케이션 구성을 재사용하려면 파라미터화가 필수다.
- Helm 같은 패키징 도구는 이런 파라미터화에 특히 적합하다.

## 실무 포인트

### 1. 템플릿/값 분리 원칙
- 템플릿에는 구조를, values에는 환경값을 둔다.
- 이미지 태그, 리소스 한도, 호스트명, feature flag를 값으로 분리한다.

### 2. 환경별 값 파일 체계
- `values-dev.yaml`, `values-stg.yaml`, `values-prd.yaml`로 기준을 통일한다.
- 공통값과 환경값을 합성해 중복을 줄인다.

### 3. 검증 자동화
- `helm lint`, `helm template` 결과를 CI에서 검증한다.
- 렌더링된 매니페스트 diff를 리뷰 단계에 포함한다.

## 바로 적용 가능한 체크리스트

- [ ] 환경별로 매니페스트 복사본을 만들지 않는다.
- [ ] 환경 차이는 values 파일에서만 관리한다.
- [ ] Helm 렌더링 결과를 PR에서 확인한다.
- [ ] 비밀값은 values에 평문 저장하지 않는다.

## 실무 한 줄

파라미터화의 목적은 편의가 아니라, 환경이 늘어나도 동일한 품질로 배포하기 위한 통제다.

## 관련 개념

- Helm Chart
- Values hierarchy
- GitOps
- Secret 분리 관리

## 출처

- 쿠버네티스 창시자에게 배우는 모범 사례 2판

