# 테스트 단계 운영 원칙 (Testing Stage Principles)

## 정의

코드 커밋/머지 이전에 품질을 확인하기 위해, 개발자 로컬 테스트와 PR 전 자동 테스트를 결합해 품질 게이트를 운영하는 원칙.

## 왜 중요한가?

- 결함을 늦게 발견할수록 수정 비용이 급격히 증가한다.
- 로컬 검증 없이 PR을 열면 CI 큐와 리뷰어 시간이 낭비된다.
- 자동 테스트가 머지 전 보장되지 않으면 릴리스 안정성이 떨어진다.

## 책 내용 핵심 정리

- 세 번째 단계는 테스팅이다.
- 목표는 두 가지다:
- PR 전에 개발자가 로컬 환경에서 테스트를 수행한다.
- 코드가 리포지터리에 머지되기 전에 자동 테스트가 반드시 실행된다.
- 프로젝트가 복잡해질수록 테스트 실행 시간도 KPI로 관리해야 한다.

## 실무 포인트

### 1. 로컬 테스트 최소 기준을 둔다
- 필수 단위 테스트/린트/타입체크를 로컬 선행 단계로 정의한다.
- PR 템플릿에 로컬 실행 체크박스를 포함한다.

### 2. 머지 게이트 자동화
- 필수 CI 잡 실패 시 머지 차단
- 핵심 테스트 성공을 브랜치 보호 규칙과 연결

### 3. 테스트 시간 최적화
- 테스트를 빠른/느린 계층으로 나누고 병렬화한다.
- 실행 시간이 긴 테스트는 별도 파이프라인으로 분리하되, 필수 게이트는 유지한다.

## 바로 적용 가능한 체크리스트

- [ ] PR 전 로컬 테스트 필수 항목을 정의했다.
- [ ] 머지 전 자동 테스트 실패 시 병합이 차단된다.
- [ ] 테스트 총 소요 시간을 KPI로 추적한다.
- [ ] 테스트 병목 구간을 주기적으로 최적화한다.

## 실무 한 줄

테스트 단계의 본질은 "많이 돌리기"가 아니라, "머지 전에 위험을 확실히 줄이기"다.

## 관련 개념

- Shift-left testing
- Branch protection
- CI Quality Gate
- Test Pyramid

## 출처

- 쿠버네티스 창시자에게 배우는 모범 사례 2판

