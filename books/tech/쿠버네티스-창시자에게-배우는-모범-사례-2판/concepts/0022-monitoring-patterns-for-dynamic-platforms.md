# 동적 플랫폼 모니터링 패턴 (Monitoring Patterns for Dynamic Platforms)

## 정의

쿠버네티스처럼 객체가 짧은 생성/소멸 주기를 갖는 동적 플랫폼에서, 정적 VM 모니터링 방식만으로는 부족하다는 전제하에 관측 체계를 재설계하는 접근.

## 왜 중요한가?

- VM 중심 모니터링은 상태가 오래 유지되는 시스템에 최적화되어 있다.
- 쿠버네티스 파드는 수명이 짧고 빠르게 교체되어 고정 관측점이 자주 사라진다.
- 같은 장애라도 "노드 문제"와 "애플리케이션 품질 문제"를 분리해서 봐야 복구가 빨라진다.

## 책 내용 핵심 정리

- 모니터링 자체는 새로운 개념이 아니지만, 쿠버네티스 환경에서는 접근을 바꿔야 한다.
- 24/7 VM 관점으로만 보면 일시적(transient) 파드의 특성을 충분히 포착하기 어렵다.
- 분산 시스템 모니터링 패턴으로 USE, RED 같은 프레임워크를 함께 고려해야 한다.

## 실무 포인트

### 1. "대상"을 고정하지 말고 "서비스"를 고정한다
- 파드 ID가 아니라 서비스/워크로드 단위로 지표를 집계한다.
- 재시작/재스케줄링에 영향을 덜 받는 라벨 전략을 사용한다.

### 2. 인프라와 애플리케이션 계층을 분리한다
- 인프라 계층: 노드/네트워크/스토리지
- 애플리케이션 계층: 요청/에러/지연
- 계층별 지표를 동시에 보는 대시보드를 기본으로 둔다.

### 3. 일시성에 강한 알람 설계
- 단일 파드 단기 스파이크보다는 서비스 집계 지표를 우선한다.
- 알람 임계치에 시간 윈도우를 둬 노이즈를 줄인다.

## 바로 적용 가능한 체크리스트

- [ ] 파드 고정 ID 기반 알람을 서비스 단위 알람으로 전환했다.
- [ ] 인프라/애플리케이션 관측 대시보드를 분리 운영한다.
- [ ] 단기 노이즈를 억제하는 윈도우 기반 알람을 적용했다.
- [ ] 재시작/스케일 이벤트를 지표와 함께 확인할 수 있다.

## 실무 한 줄

쿠버네티스 모니터링의 핵심은 "무엇을 모니터링하느냐"보다 "어떤 변화를 기준으로 해석하느냐"다.

## 관련 개념

- Ephemeral workloads
- Workload-level observability
- Service discovery
- Time-window alerting

## 출처

- 쿠버네티스 창시자에게 배우는 모범 사례 2판

